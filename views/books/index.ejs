<% layout('layouts/boilerplate') %> 
    <h1>The Books</h1>
    <br>
    <br>
    
    <div class="row row-cols-5 row-cols-md-4 g-4 mb-4">
  <% for (let book of books){%>
    <div class="card " >
      <img src="<%= book.image %> " class="card-img-top img-thumbnail"  >
      <div class="card-body">
        <h4 class="card-title"><%= book.name %>  </h5>
        <ul class="list-group list-group-flush">
          <%  if( book.instock >  0){ %>
            <li class="list-group-item"><button type="button" class="btn btn-success btn-sm">in stock</button></li>
           <% }else{%>
            <li class="list-group-item"><button type="button" class="btn btn-danger btn-sm">run out</button></li>
            <% }  %> 
          <li class="list-group-item"> <b>Author:</b> <%= book.author %> </li>
          <li class="list-group-item"><b>Price: </b> <%= book.price %>$ </li>
        </ul>

    <% if (!currentUser) { %>
      <a href="/login" class="btn btn-success">Add to cart <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-basket3" viewBox="0 0 16 16">
        <path d="M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM3.394 15l-1.48-6h-.97l1.525 6.426a.75.75 0 0 0 .729.574h9.606a.75.75 0 0 0 .73-.574L15.056 9h-.972l-1.479 6h-9.21z"/>
      </svg></a>
      <a href="/books/<%= book._id %>" class="btn btn-primary">More <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-square" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm4.5 5.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
      </svg></a>
    </form>
    <% }else{ %> 
      <form method="POST" action="mycart/add-to-cart/<%= currentUser._id %>/<%= book._id %>">
       <% if ( book.instock >  0) { %>
        <button class="btn btn-success" >Add to cart  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-basket3" viewBox="0 0 16 16">
          <path d="M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM3.394 15l-1.48-6h-.97l1.525 6.426a.75.75 0 0 0 .729.574h9.606a.75.75 0 0 0 .73-.574L15.056 9h-.972l-1.479 6h-9.21z"/>
        </svg></button>
       <% } %>
        <a href="/books/<%= book._id %>" class="btn btn-primary">More <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-square" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm4.5 5.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"/>
        </svg></a>
      </form>
      <% } %> 
      </div>
    </div>
        <% }%>
      </div>
 